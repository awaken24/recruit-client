<div class="container">
    <div class="form-card" *ngIf="tokenValido">
        <h2>Redefinir Senha</h2>

        <form [formGroup]="form" (ngSubmit)="onSubmit()" *ngIf="!successMessage">
            <div class="field">
                <label>Nova Senha</label>
                <input type="password" formControlName="password" />
                <div *ngIf="submitted && form.controls['password'].invalid" class="error-message">
                    A senha deve ter pelo menos 6 caracteres.
                </div>
            </div>

            <div class="field">
                <label>Confirme a Nova Senha</label>
                <input type="password" formControlName="password_confirmation" />
                <div *ngIf="submitted && form.controls['password_confirmation'].invalid" class="error-message">
                    Confirme sua senha.
                </div>
            </div>

            <button type="submit" [disabled]="loading">
                <span *ngIf="loading">Salvando...</span>
                <span *ngIf="!loading">Redefinir Senha</span>
            </button>
        </form>

        <div *ngIf="successMessage" class="success-message">
            {{ successMessage }}
        </div>
    </div>

    <div class="error-container" *ngIf="!tokenValido">
        <div class="error-icon">
            <i class="fas fa-exclamation-circle"></i>
        </div>
        <h2>Ops, algo deu errado!</h2>
        <div class="error-message">
            {{ errorMessage || 'Link inválido ou expirado.' }}
        </div>
        <div class="error-action">
            <a routerLink="/users/forgot-password">Solicitar nova redefinição</a>
        </div>
    </div>
</div>
<app-footer></app-footer>